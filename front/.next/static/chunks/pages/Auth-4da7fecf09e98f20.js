(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[984],{891:function(e,t,s){"use strict";var a=s(4836);t.Z=void 0;var r=a(s(4938)),o=s(5893),l=(0,r.default)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");t.Z=l},3595:function(e,t,s){"use strict";var a=s(4836);t.Z=void 0;var r=a(s(4938)),o=s(5893),l=(0,r.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");t.Z=l},3460:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Auth",function(){return s(567)}])},567:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),o=s(3595),l=s(891),n=s(5121),i=s(1163);t.default=()=>{let[e,t]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),y=(0,i.useRouter)();return(0,a.jsx)("div",{className:"flex items-center -mt-14 justify-center min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-white shadow-xl rounded-lg overflow-hidden border border-gray-300 transition-transform transform hover:scale-105 duration-300 ease-in-out",children:[(0,a.jsxs)("div",{className:"absolute inset-x-0 top-0 flex border-b border-gray-300",children:[(0,a.jsx)("div",{className:"cursor-pointer px-6 py-3 text-lg font-medium ".concat(b?"bg-gray-200 text-gray-bg-gold":"bg-gold text-white"," w-1/2 text-center transition duration-300"),onClick:()=>v(!1),children:"Log In"}),(0,a.jsx)("div",{className:"cursor-pointer px-6 py-3 text-lg font-medium ".concat(b?"bg-gold text-white":"bg-gray-200 text-gray-bg-gold"," w-1/2 text-center transition duration-300"),onClick:()=>v(!0),children:"MOT DE PASSE OUBLI\xc9?"})]}),(0,a.jsx)("div",{className:"p-8",children:b?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.Z.post("http://localhost:3005/Chauff/reset",{email:s}).then(()=>{t("Un email a \xe9t\xe9 envoy\xe9"),c(""),g(""),setTimeout(()=>t(""),1e4)}).catch(e=>{console.warn(e),e.response&&404===e.response.status&&g("L'email n'existe pas")})},children:[e&&(0,a.jsx)("div",{className:"mb-6  text-green-600 bg-white border border-green-600 rounded-lg py-2 px-4 text-center shadow-md",children:e}),(0,a.jsx)("h4",{className:"text-2xl font-semibold mb-8 mt-16 text-center text-gray-700",children:"MOT DE PASSE OUBLI\xc9 ?"}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("input",{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gold transition duration-300 ease-in-out",placeholder:"Email",autoComplete:"off",onChange:e=>c(e.target.value),value:s,required:!0}),(0,a.jsx)(l.Z,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500"}),m&&(0,a.jsx)("p",{className:"text-red-600 mt-1",children:m})]}),(0,a.jsx)("button",{type:"submit",className:"w-full text py-3 bg-gray-700 text-white rounded-lg hover:bg-gold transition duration-300 ease-in-out shadow-xl",children:"Envoyer"})]}):(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.Z.post("http://localhost:3005/Chauff/loginch",{email:s,password:u}).then(e=>{let t=e.data;if("D\xe9sactiv\xe9"===t.Cstatus){h("Votre compte est d\xe9sactiv\xe9"),y.push("/Auth");return}localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("isLoggedIn",!0),localStorage.setItem("userRole",t.role),localStorage.setItem("userNom",t.Nom),localStorage.setItem("userPrenom",t.Prenom),localStorage.setItem("userAvatar",t.photoAvatar),localStorage.setItem("userAdress",t.address),localStorage.setItem("userEmail",t.email),localStorage.setItem("userId",t.id),localStorage.setItem("Cstatus",t.Cstatus),g(""),f(""),h(""),y.push("/profile")}).catch(e=>{console.warn(e),e.response&&(403===e.response.status&&g("L'email n'existe pas"),406===e.response.status&&f("Mot de passe incorrect"))})},children:[(0,a.jsx)("h4",{className:"text-2xl mt-16 font-semibold mb-6 text-center text-gray-700",children:"Log In"}),x&&(0,a.jsx)("p",{className:"text-red-600 mb-4 text-center",children:x}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("input",{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gold transition duration-300 ease-in-out",placeholder:"Email",autoComplete:"off",onChange:e=>c(e.target.value),value:s,required:!0}),(0,a.jsx)(l.Z,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500"}),m&&(0,a.jsx)("p",{className:"text-red-600 mt-1",children:m})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("input",{type:"password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gold transition duration-300 ease-in-out",placeholder:"Mot de passe",autoComplete:"off",onChange:e=>d(e.target.value),value:u,required:!0}),(0,a.jsx)(o.Z,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500"}),p&&(0,a.jsx)("p",{className:"text-red-600 mt-1",children:p})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 bg-gray-700 text-white rounded-lg hover:bg-gold transition duration-300 ease-in-out shadow-xl",children:"Log In"})]})})]})})}}},function(e){e.O(0,[121,158,774,888,179],function(){return e(e.s=3460)}),_N_E=e.O()}]);