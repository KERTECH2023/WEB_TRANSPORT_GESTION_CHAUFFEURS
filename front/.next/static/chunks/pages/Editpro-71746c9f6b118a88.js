(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{5144:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Editpro",function(){return s(8558)}])},8558:function(e,a,s){"use strict";s.r(a);var t=s(5893),l=s(7294),n=s(5121),r=s(1163);a.default=()=>{let[e,a]=(0,l.useState)({file:[]}),[s,o]=(0,l.useState)({}),[d,i]=(0,l.useState)({oldPassword:"",newPassword:""}),[c,h]=(0,l.useState)(null),m=(0,r.useRouter)(),[p,u]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[j,N]=(0,l.useState)(""),[b,f]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=window.localStorage;e&&h(localStorage.getItem("userId"))},[]),(0,l.useEffect)(()=>{null!==c&&getSingleUser(c)},[c]);let getSingleUser=async e=>{let a=await n.Z.get("http://localhost:3005/Chauff/searchchauf/".concat(e));200===a.status&&o({...a.data})},onChangeHandler=e=>{o({...s,[e.target.name]:e.target.value})},handleInputChange=e=>{let{name:a,value:s}=e.target;i(e=>({...e,[a]:s}))};return(0,t.jsxs)("div",{className:"hi",children:[(0,t.jsx)("form",{action:"",id:"login",method:"put",onSubmit:e=>{e.preventDefault();let a=new FormData;for(let t in a.append("photoAvatar",e.target.photoAvatar.files[0]),s)a.append(t,s[t]);if(!/^\+?[0-9]{8,14}$/.test(s.phone)){u("La longueur doit \xeatre entre 8 et 14");return}if(!/^[0-9]{8,12}$/.test(s.cnicNo)){g("La longueur doit \xeatre entre 8 et 12");return}n.Z.put("http://localhost:3005/Chauff/updatechauf/".concat(c),a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{m.push("/profile")}).catch(e=>{e.response&&(403===e.response.status?N("l'email existe d\xe9j\xe0"):N(""),e.response.data.phoneExists?u("Phone already exists"):u(""),e.response.data.cinExists?g("CIN already exists"):g(""))})},children:(0,t.jsxs)("div",{className:"wrappere bg-white mt-sm-5",children:[(0,t.jsx)("h4",{className:"pb-4 border-bottom",children:"Param\xe8tres du compte"}),(0,t.jsxs)("div",{className:"d-flex align-items-start py-3 border-bottom",children:[(0,t.jsx)("img",{src:s.photoAvatar||"",className:"img",alt:""}),(0,t.jsxs)("div",{className:"pl-sm-4 pl-2",id:"img-section",children:[(0,t.jsx)("b",{children:"Photo Profile "}),(0,t.jsx)("p",{children:"Accepter fichier type .png. Moins De 1MB"}),(0,t.jsx)("input",{type:"file",onChange:e=>a(e.target.files[0]),name:"photoAvatar",className:"ji",id:"photoAvatar"})]})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsxs)("div",{className:"row py-2",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"firstname",children:"Nom"}),(0,t.jsx)("input",{type:"text",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"Steve",name:"Nom",value:s.Nom||"",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"lastname",children:"Prenom"}),(0,t.jsx)("input",{type:"text",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"Smith",name:"Prenom",value:s.Prenom||"",required:!0})]})]}),(0,t.jsxs)("div",{className:"row py-2",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,t.jsx)("input",{type:"text",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"steve_@email.com",value:s.email||"",name:"email",disabled:!0,required:!0}),j&&(0,t.jsx)("label",{className:"text-red-500",children:j})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"phone",children:"N\xb0 T\xe9l"}),(0,t.jsx)("input",{type:"tel",name:"phone",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"+1 213-548-6015",value:s.phone||"",required:!0}),p&&(0,t.jsx)("label",{className:"text-red-500",children:p})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"cnicNo",children:"Cin"}),(0,t.jsx)("input",{type:"text",name:"cnicNo",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"0745..",value:s.cnicNo||"",required:!0}),x&&(0,t.jsx)("label",{className:"text-red-500",children:x})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"address",children:"Adresse"}),(0,t.jsx)("input",{type:"tel",name:"adresse",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"Tunisie ....",value:s.address||"",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"postalCode",children:"Code Postal"}),(0,t.jsx)("input",{type:"tel",name:"postalCode",onChange:onChangeHandler,className:"bg-light form-control",placeholder:"65412",value:s.postalCode||"",required:!0})]})]}),(0,t.jsx)("div",{className:"py-3 pb-4 border-bottom",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-primary mr-3",children:"Sauvegarder les modifications"})}),(0,t.jsxs)("div",{className:"d-sm-flex align-items-center pt-3",id:"deactivate",children:[(0,t.jsx)("div",{children:(0,t.jsx)("b",{children:"Desavtiver Votre Compte"})}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)("button",{className:"btn danger",onClick:()=>{n.Z.put("http://localhost:3005/Chauff/updatestatus/".concat(c),{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{window.localStorage.clear(),setIsLoggedIn(!1),m.push("/Auth")}).catch(e=>{console.warn(e)})},children:"D\xe9sactiver"})})]})]})]})}),(0,t.jsx)("form",{children:(0,t.jsxs)("div",{className:"wrappere bg-white mt-sm-5",children:[(0,t.jsx)("h3",{className:"pb-4 border-bottom",children:"Modifier Mot De passe"}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"oldPassword",children:"Ancien Mot de Passe"}),(0,t.jsx)("input",{type:"password",className:"bg-light form-control",placeholder:"Ancien Mot de Passe",name:"oldPassword",value:d.oldPassword||"",onChange:handleInputChange}),(0,t.jsx)("div",{children:b&&(0,t.jsx)("label",{className:"text-red-500",children:b})})]}),(0,t.jsxs)("div",{className:"col-md-6 pt-md-0 pt-3",children:[(0,t.jsx)("label",{htmlFor:"newPassword",children:"Nouveau Mot de Passe"}),(0,t.jsx)("input",{type:"password",className:"bg-light form-control",placeholder:"Nouveau Mot de Passe",name:"newPassword",value:d.newPassword||"",onChange:handleInputChange})]}),(0,t.jsx)("div",{className:"py-3 pb-4 border-bottom",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-primary mr-3",onClick:e=>{e.preventDefault();let a={oldPassword:d.oldPassword,newPassword:d.newPassword};n.Z.put("http://localhost:3005/Chauff/pass/".concat(c),a).then(e=>{m.push("/profile")}).catch(e=>{e.response&&(401===e.response.status?f("Ancien mot de passe est incorrect"):f(""))})},children:"Modifier Mot De Passe"})})]})})]})}}},function(e){e.O(0,[121,774,888,179],function(){return e(e.s=5144)}),_N_E=e.O()}]);